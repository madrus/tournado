# .cursor-rules.md

## âœ… General Coding Style

- TypeScript: prefer inferred types unless required by eslint; no semicolons; single quotes
- React: use function declarations, not expressions
- Tailwind: utility-first, grouped classes; avoid hardcoded px values

---

## ğŸ§  Cursor Guidance

- Always enable `context7` when modifying non-trivial code
- For anything that touches multiple files, use `sequentialThinking` to plan steps
- When resolving stack traces, use `explainTrace` before `autoFix`
- Review diffs manually after using `fixErrors` or `autoFix` â€” don't blindly trust green tests
- Only use `smartCommit` after verifying file renames, deletions, and semantic scope

---

## ğŸ¨ Tailwind Rules

- Group classes in this order: layout â†’ spacing â†’ color â†’ typography â†’ effects
- Avoid `w-[123px]`, `h-[58px]`, etc. unless absolutely needed
- Prefer Tailwindâ€™s spacing scale (e.g. `px-4`) to manual values
- Use translucency and backdrop filters for UI polish, not raw RGBA

---

## ğŸ§­ Routing (React Router v7)

- Routes must be declarative and colocated with their layout when possible
- Use `useNavigate` and `useParams` from react-router@7 â€” never `useHistory`
- Always update the parent `routes.tsx` manually when adding a new route
- Prefer lazy-loaded routes unless performance deems otherwise

---

## âš’ï¸ Refactoring Philosophy

- **Minimal change principle**: Refactor with the least number of modified lines
- Donâ€™t apply formatting or stylistic cleanups unless explicitly requested
- Use `refactor` MCP only when scoped to one file or with `context7` for connected modules
- Avoid renaming public API (functions/props) unless you also update all usages

---

## ğŸ“¦ Zustand & State

- Never mutate state directly â€” always use the setter
- Zustand slices should be flat; use selectors for derived state
- Donâ€™t nest Zustand stores â€” prefer small slices per concern
- Extract actions into `actions.ts` if they grow beyond 3â€“5 functions

---

## ğŸ”Œ Tanstack Query

- Use tuple-style keys: `['project', id]` not string-based keys
- Always colocate query/mutation function with the hook that uses it
- Favor suspense + error boundaries instead of conditional `isLoading` logic

---

## ğŸ§ª Testing (Vitest / Playwright)

- Describe real user behavior in Playwright (`click login`, `assert dashboard appears`)
- For Vitest, smoke test all Zustand mutations and selectors minimally
- Use MSW when mocking API responses â€” not custom fetch mocks

---
