#!/usr/bin/env bash
set -euo pipefail

# Add Homebrew to PATH if it exists
[ -d "/opt/homebrew/bin" ] && export PATH="/opt/homebrew/bin:$PATH"
[ -d "/usr/local/bin" ] && export PATH="/usr/local/bin:$PATH"

# Run Biome check with auto-fix on staged files
pnpm biome check --staged --write --unsafe .

# Re-add formatted files to staging area
git add -u

# Run typecheck
pnpm typecheck
