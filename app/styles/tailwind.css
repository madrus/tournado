@import './colors.css';
@import 'tailwindcss';

/* Safelist ring and ring-offset classes for button hover/focus effects */
@source inline("{focus-visible:,hover:,}ring-2");
@source inline("{focus-visible:,hover:,}ring-offset-2");
@source inline("{focus-visible:,hover:,}ring-offset-white");
@source inline("{focus-visible:,hover:,}ring-emerald-600");
@source inline("{focus-visible:,hover:,}ring-brand");
@source inline("{focus-visible:,hover:,}ring-blue-600");
@source inline("{focus-visible:,hover:,}ring-gray-600");

/* Safelist shadow classes for button effects */
@source inline("shadow-md");
@source inline("hover:shadow-lg");

/* Tailwind v4 Theme Configuration */
@theme {
  --color-background: var(--color-background);
  --color-foreground: var(--color-foreground);

  /* Brand Colors */
  --color-brand: var(--color-brand);
  --color-brand-accent: var(--color-brand-accent);
  --color-brand-dark: var(--color-brand-dark);
  --color-brand-light: var(--color-brand-light);

  /* Main Accent */
  --color-main: var(--color-main);
  --color-accent: var(--color-accent);

  /* Text Colors */
  --color-title: var(--color-title);
  --color-title-accent: var(--color-title-accent);
  --color-foreground-heading: var(--color-foreground-heading);
  --color-foreground-light: var(--color-foreground-light);
  --color-foreground-lighter: var(--color-foreground-lighter);
  --color-foreground-darker: var(--color-foreground-darker);

  /* Button Colors */
  --color-button-primary-background: var(--color-button-primary-background);
  --color-button-primary-text: var(--color-button-primary-text);
  --color-button-primary-hover-background: var(--color-button-primary-hover-background);

  --color-button-secondary-background: var(--color-button-secondary-background);
  --color-button-secondary-text: var(--color-button-secondary-text);
  --color-button-secondary-border: var(--color-button-secondary-border);
  --color-button-secondary-hover-background: var(--color-button-secondary-hover-background);

  --color-button-tertiary-background: var(--color-button-tertiary-background);
  --color-button-tertiary-text: var(--color-button-tertiary-text);
  --color-button-tertiary-border: var(--color-button-tertiary-border);
  --color-button-tertiary-hover-background: var(--color-button-tertiary-hover-background);
  --color-button-tertiary-hover-border: var(--color-button-tertiary-hover-border);

  /* Danger Button Colors */
  --color-button-danger-background: var(--color-button-danger-background);
  --color-button-danger-text: var(--color-button-danger-text);
  --color-button-danger-hover-background: var(--color-button-danger-hover-background);

  --color-button-danger-secondary-background: var(--color-button-danger-secondary-background);
  --color-button-danger-secondary-text: var(--color-button-danger-secondary-text);
  --color-button-danger-secondary-border: var(--color-button-danger-secondary-border);
  --color-button-danger-secondary-hover-background: var(--color-button-danger-secondary-hover-background);

  --color-button-danger-tertiary-background: var(--color-button-danger-tertiary-background);
  --color-button-danger-tertiary-text: var(--color-button-danger-tertiary-text);
  --color-button-danger-tertiary-border: var(--color-button-danger-tertiary-border);
  --color-button-danger-tertiary-hover-background: var(--color-button-danger-tertiary-hover-background);
  --color-button-danger-tertiary-hover-border: var(--color-button-danger-tertiary-hover-border);

  /* Brand Button Colors */
  --color-button-brand-background: var(--color-button-brand-background);
  --color-button-brand-text: var(--color-button-brand-text);
  --color-button-brand-hover-background: var(--color-button-brand-hover-background);

  --color-button-brand-secondary-background: var(--color-button-brand-secondary-background);
  --color-button-brand-secondary-text: var(--color-button-brand-secondary-text);
  --color-button-brand-secondary-border: var(--color-button-brand-secondary-border);
  --color-button-brand-secondary-hover-background: var(--color-button-brand-secondary-hover-background);

  --color-button-brand-tertiary-background: var(--color-button-brand-tertiary-background);
  --color-button-brand-tertiary-text: var(--color-button-brand-tertiary-text);
  --color-button-brand-tertiary-border: var(--color-button-brand-tertiary-border);
  --color-button-brand-tertiary-hover-background: var(--color-button-brand-tertiary-hover-background);
  --color-button-brand-tertiary-hover-border: var(--color-button-brand-tertiary-hover-border);

  /* Neutral Button Colors */
  --color-button-neutral-background: var(--color-button-neutral-background);
  --color-button-neutral-text: var(--color-button-neutral-text);
  --color-button-neutral-hover-background: var(--color-button-neutral-hover-background);

  --color-button-neutral-secondary-background: var(--color-button-neutral-secondary-background);
  --color-button-neutral-secondary-text: var(--color-button-neutral-secondary-text);
  --color-button-neutral-secondary-border: var(--color-button-neutral-secondary-border);
  --color-button-neutral-secondary-hover-background: var(--color-button-neutral-secondary-hover-background);

  --color-button-neutral-tertiary-background: var(--color-button-neutral-tertiary-background);
  --color-button-neutral-tertiary-text: var(--color-button-neutral-tertiary-text);
  --color-button-neutral-tertiary-border: var(--color-button-neutral-tertiary-border);
  --color-button-neutral-tertiary-hover-background: var(--color-button-neutral-tertiary-hover-background);
  --color-button-neutral-tertiary-hover-border: var(--color-button-neutral-tertiary-hover-border);

  /* Focus Ring Colors */
  --color-button-danger-outline-focus-ring-inner: var(--color-button-danger-outline-focus-ring-inner);
  --color-button-danger-outline-focus-ring-outer: var(--color-button-danger-outline-focus-ring-outer);
  --color-button-outline-border-red: var(--color-button-outline-border-red);

  /* Gradients */
  --gradient-from: var(--gradient-from);
  --gradient-to: var(--gradient-to);

  /* Footer Colors */
  --footer-bg: var(--footer-bg);
  --footer-text: var(--footer-text);

  /* Hover Colors */
  --color-background-hover: var(--color-background-hover);
}

/* Base Styles */
@layer base {
  /* Ensure headings use the title color */
  h1, h2, h3, h4, h5, h6 {
    color: var(--color-title);
  }

  /* Dark mode heading colors - exclude AppBar */
  .dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6 {
    color: var(--color-title-accent);
  }

  .dark .text-foreground-heading {
    color: var(--color-title);
  }

  .dark .text-foreground-light {
    color: var(--color-foreground-light);
  }

  /* Make all paragraph text use foreground color in dark mode for accessibility */
  .dark p:not(.text-foreground-heading) {
    color: var(--color-foreground);
  }

  /* Footer styles handled by component classes */

  /* Mobile navigation uses CSS custom properties */
}

/* Semantic color utility classes for homepage and general use */
.text-accent {
  color: var(--color-accent);
}
.dark .text-accent {
  color: var(--color-accent); /* Same as light for now */
}

.text-brand-accent {
  color: var(--color-brand-accent); /* Uses theme-aware brand color */
}
.dark .text-brand-accent {
  color: var(--color-brand-accent); /* Uses theme-aware brand color */
}

.text-brand {
  color: var(--color-brand);
}
.dark .text-brand {
  color: var(--color-brand); /* Uses theme-aware brand color */
}

.text-error {
  color: var(--color-brand);
}
.dark .text-error {
  color: var(--color-brand); /* Same as light for now */
}

.bg-accent {
  background-color: var(--color-accent);
}
.dark .bg-accent {
  background-color: var(--color-accent); /* Same as light for now */
}

.bg-brand-accent {
  background-color: var(--color-brand-accent);
}
.dark .bg-brand-accent {
  background-color: var(--color-brand-accent);
}

.bg-error {
  background-color: var(--color-brand);
}

.focus-ring-double {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-button-danger-outline-focus-ring-inner), 0 0 0 4px var(--color-button-danger-outline-focus-ring-outer);
}
.dark .font-semibold-accent {
  color: var(--color-accent);
}

/* RTL-specific utilities */
[dir="rtl"] .rtl\:text-right {
  text-align: right;
}

[dir="rtl"] .rtl\:text-left {
  text-align: left;
}

[dir="rtl"] .rtl\:ml-auto {
  margin-left: auto;
}

[dir="rtl"] .rtl\:mr-auto {
  margin-right: auto;
}

[dir="rtl"] .rtl\:flex-row-reverse {
  flex-direction: row-reverse;
}

/* Script-aware typography system - clean and simple */

/* Arabic text - for Arabic content in any context */
.arabic-text.text-base,
.arabic-text {
  font-family: 'Amiri', serif !important;
  font-size: 1.25rem !important; /* Use rem to avoid em cascade issues */
}

/* Ensure Arabic text applies to all children unless overridden */
.arabic-text * {
  font-family: 'Amiri', serif !important;
}

/* Latin text - for Latin content in Arabic context */
.latin-text,
.arabic-text .latin-text {
  font-family: system-ui, sans-serif !important;
  font-size: 1rem !important; /* Use absolute size to match Latin mode */
}

/* Ensure Latin text style applies to children with higher specificity */
.latin-text *,
.arabic-text .latin-text * {
  font-family: system-ui, sans-serif !important;
  font-size: 1rem !important;
}

/* Latin titles - for Latin headings in Arabic context */
.latin-title {
  font-family: system-ui, sans-serif !important;
  /* Fix letter spacing for titles in Arabic mode */
  /* letter-spacing: -0.02em !important; Tighter letter spacing */
}

/* Specific fix for app name on home page in RTL context */
[dir="rtl"] .app-name.latin-title {
  font-family: system-ui, sans-serif !important;
  /* letter-spacing: -0.05em !important; Even tighter for the app name specifically */
  /* Maintain consistent line height without conflicting with Tailwind classes */
  line-height: 1.5 !important; /* Match leading-normal from typography.appName */
  vertical-align: baseline !important; /* Prevent vertical shifting */
  display: block !important; /* Ensure consistent block-level behavior */
  margin: 0 !important; /* Reset any unwanted margins */
}

/* RTL form inputs */
[dir="rtl"] input,
[dir="rtl"] textarea,
[dir="rtl"] select {
  text-align: right;
}

/* Override for elements that should remain LTR even in RTL */
[dir="rtl"] .ltr-override {
  direction: ltr;
  text-align: left;
}

/* User menu dropdown animation - synced with icon animation */
[data-testid="user-menu-dropdown"] {
  transform-origin: top;
  animation-duration: 300ms;
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  animation-fill-mode: forwards;
}

/* Opening animation */
[data-testid="user-menu-dropdown"][data-state="open"] {
  animation-name: menu-open;
}

/* Closing animation */
[data-testid="user-menu-dropdown"][data-state="closed"] {
  animation-name: menu-close;
}

@keyframes menu-open {
  from {
    opacity: 0;
    transform: scaleY(0);
  }
  to {
    opacity: 1;
    transform: scaleY(1);
  }
}

@keyframes menu-close {
  from {
    opacity: 1;
    transform: scaleY(1);
  }
  to {
    opacity: 0;
    transform: scaleY(0);
  }
}

/* AppBar title Arabic text - needs higher specificity to override Tailwind size classes */
[dir="rtl"] header .arabic-text.text-xl {
  font-size: 1.5625rem !important; /* 25px = 20px * 1.25 */
  transform: translateY(4px) !important; /* More downward adjustment */
}

[dir="rtl"] header .arabic-text.sm\:text-2xl {
  font-size: 1.875rem !important; /* 30px = 24px * 1.25 */
  transform: translateY(5px) !important; /* More downward adjustment for larger text */
}

@media (min-width: 640px) {
  [dir="rtl"] header .arabic-text.sm\:text-2xl {
    font-size: 1.875rem !important; /* 30px = 24px * 1.25 */
    transform: translateY(5px) !important; /* More downward adjustment for larger text */
  }
}
